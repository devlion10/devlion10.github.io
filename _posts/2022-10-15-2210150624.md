---
layout: post
title:  "Docker에 설치된 gitlab, jenkins 연동 후 jeus8 deploy CI,CD 환경 구축"
---

# Docker에 설치된 gitlab, jenkins 연동 후 jeus8 deploy CI,CD 환경 구축

**gitlab accesstoken 정책 변경으로 jenkins에서 인증 오류 발생하여 리눅스 쉘스크립트로 gitlab git pull 작업 작성**



- gitlab git pull sh파일 작성 

```git
git init
git remote add origin 깃랩url
git pull origin master
```

- 현재 의도하는 spring의 context-common.xml을 사용한 예

```xml
<util:properties id="srdProp"
                     location="classpath:/egovframework/globals#{systemProperties['spring.profiles.active'] eq null?'':'-dev'}.properties"/>
<context:property-placeholder properties-ref="srdProp"/>
```

globals.properties
```xml
srd.apiUrl=:10030/api
### MAP URL ###
srd.mapUrl=https://roaddig.ss.eseoul.go.kr:10060/G2DataService/GService
srd.mapServiceUrl=https://roaddig.ss.eseoul.go.kr:10060
```

jsp
```jsp
<script type="text/javascript">
let CONTEXT_PATH = "${pageContext.request.contextPath}";
let API_PATH = '<%=(InetAddress.getLocalHost().getHostName().contains("roaddig"))?"https://"+InetAddress.getLocalHost().getHostName()+EgovProperties.getProperty("srd.apiUrl"):EgovProperties.getProperty("srd.apiUrl")%>';
let mapUrl = '<spring:eval expression="@srdProp.getProperty('srd.mapUrl')"/>';
let mapServiceUrl = '<spring:eval expression="@srdProp.getProperty('srd.mapServiceUrl')"/>';
</script>
```




    
                
